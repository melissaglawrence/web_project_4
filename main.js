!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=n,this._button=this._form.querySelector(e.submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector))}var n,r;return n=t,(r=[{key:"_showInputError",value:function(e){var t=document.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=document.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_toggleButtonState",value:function(e){e.some((function(e){return!e.validity.valid}))?(this._button.classList.add(this._inactiveButtonClass),this._button.disabled=!0):(this._button.classList.remove(this._inactiveButtonClass),this._button.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList)}))}))}},{key:"enableValidation",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._toggleButtonState(e._inputList)})),this._setEventListeners(this._inputList)}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t,n){var o=this,i=t.data,a=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_likeCard",(function(){o._card.querySelector(".grid-item__like").classList.toggle("grid-item__like_active")})),r(this,"_deleteCard",(function(){o._card.remove(),o._card=null})),this._name=i.name,this._link=i.link,this._handleCardClick=a,this._cardSelector=n}var t,o;return t=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".grid-item").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this._card.querySelector(".grid-item__like"),t=this._card.querySelector(".grid-item__trash");this._card.querySelector(".grid-item__img").addEventListener("click",this._handleCardClick),t.addEventListener("click",this._deleteCard),e.addEventListener("click",this._likeCard)}},{key:"generateCard",value:function(){this._card=this._getTemplate(),this._setEventListeners();var e=this._card.querySelector(".grid-item__img");return this._card.querySelector(".grid-item__text").textContent=this._name,e.src=this._link,e.alt=this._name,this._card}}])&&n(t.prototype,o),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._containerElement=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._containerElement.prepend(e)}}])&&i(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&u(t.prototype,n),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e,t){var n,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._formElement=n._popupElement.querySelector(".popup__info"),n._handleFormSubmit=r,n}return t=a,(n=[{key:"close",value:function(){this._formElement.reset(),f(_(a.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".popup__input"),this._inputValues={},this._inputList.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())})),f(_(a.prototype),"setEventListeners",this).call(this)}}])&&l(t.prototype,n),a}(c);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(){return v(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link,r=this._popupElement.querySelector(".popup__image-content");r.src=n,r.alt=t,this._popupElement.querySelector(".popup__image-text").textContent=t,b(k(a.prototype),"open",this).call(this)}}])&&m(t.prototype,n),a}(c);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}}])&&S(t.prototype,n),e}(),L={inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},O=(document.querySelector("#placeInfo"),document.querySelector(".popup__info")),j=document.querySelector(".profile__edit"),q=document.querySelector(".popup__input_edit_name"),P=document.querySelector(".popup__input_edit_about"),x=document.querySelector(".profile__add"),I=new C({nameSelector:".profile__name",aboutSelector:".profile__desc"}),R=new h({handleFormSubmit:function(e){I.setUserInfo({name:e.name,about:e.about}),R.close()}},"#popupEdit");R.setEventListeners(),j.addEventListener("click",(function(){var e=I.getUserInfo();q.value=e.name,P.value=e.about,R.open()}));var B=new w("#popupImage");B.setEventListeners();var T=new a({renderer:function(e){var t=new o({data:e,handleCardClick:function(){B.open(e)}},"#grid-template").generateCard();T.addItem(t)}},".grid__list"),V=new h({handleFormSubmit:function(e){var t=[{name:e.title,link:e.imageUrl}];T.renderItems(t),V.close()}},"#popupPlace");V.setEventListeners(),x.addEventListener("click",(function(){V.open()})),T.renderItems([{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}]);var D=new t(L,O),F=new t(L,placeInfo);D.enableValidation(),F.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFcEUsS0FBTXFCLEVBQUtnRCxNQUFPbkUsS0FBTW1CLEVBQUtpRCxXQUNqRFAsRUFBU1EsWUFBWUgsR0FDckJELEVBQVNwQyxVRG5EYyxlQ3lEN0JvQyxFQUFTVCxvQkFFVEwsRUFBY2xFLGlCQUFpQixTQUFTLFdBQ3RDZ0YsRUFBU04sVUFHWEUsRUFBU1EsWUN6RlksQ0FDbkIsQ0FDRXZFLEtBQU0sa0JBQ05FLEtBQU0sb0RBRVIsQ0FDRUYsS0FBTSxjQUNORSxLQUFNLHVEQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sMERBRVIsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLG1EQUVSLENBQ0VGLEtBQU0sd0JBQ05FLEtBQU0sbURBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSxrRERxRVYsSUFBTXNFLEVBQXNCLElBQUkxSCxFQUFjQyxFQUFrQmtHLEdBQzFEd0IsRUFBb0IsSUFBSTNILEVBQWNDLEVBQWtCMkgsV0FFOURGLEVBQW9CRyxtQkFDcEJGLEVBQWtCRSxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9pbml0aWFsLWNhcmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRzKSB7XHJcbiAgICBjb25zdCBpc1ZhbGlkID0gaW5wdXRzLnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG4gICAgaWYgKGlzVmFsaWQpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2lucHV0TGlzdCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG5cclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICB9XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZC1pdGVtXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuICBfbGlrZUNhcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9jYXJkXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQtaXRlbV9fbGlrZVwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImdyaWQtaXRlbV9fbGlrZV9hY3RpdmVcIik7XHJcbiAgfTtcclxuICBfZGVsZXRlQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkID0gbnVsbDtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBfbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5ncmlkLWl0ZW1fX2xpa2VcIik7XHJcbiAgICBjb25zdCBfdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZC1pdGVtX190cmFzaFwiKTtcclxuICAgIGNvbnN0IF9pbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZC1pdGVtX19pbWdcIik7XHJcblxyXG4gICAgX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcclxuICAgIF90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fZGVsZXRlQ2FyZCk7XHJcbiAgICBfbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fbGlrZUNhcmQpO1xyXG4gIH1cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQtaXRlbV9faW1nXCIpO1xyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQtaXRlbV9fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSB8fFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IGhhbmRsZUZvcm1TdWJtaXQgfSwgcG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbmZvXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1jb250ZW50XCIpO1xyXG4gICAgaW1hZ2Uuc3JjID0gbGluaztcclxuICAgIGltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGV4dFwiKS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcbn1cclxuIiwiLy9GT1JNIFZBTElEQVRJT05cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc2F2ZV9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5leHBvcnQgY29uc3QgcGxhY2VJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGFjZUluZm9cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2luZm9cIik7XHJcblxyXG4vL1BST0ZJTEVcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gXCIucHJvZmlsZV9fbmFtZVwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2MgPSBcIi5wcm9maWxlX19kZXNjXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X2VkaXRfbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19pbnB1dF9lZGl0X2Fib3V0XCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZSA9IFwiI3BvcHVwRWRpdFwiO1xyXG5cclxuLy9DQVJEU1xyXG5leHBvcnQgY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjZ3JpZC10ZW1wbGF0ZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IFwiI3BvcHVwSW1hZ2VcIjtcclxuZXhwb3J0IGNvbnN0IGdyaWRMaXN0ID0gXCIuZ3JpZF9fbGlzdFwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGRQbGFjZSA9IFwiI3BvcHVwUGxhY2VcIjtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgaW5pdGlhbENhcmRzIGZyb20gXCIuLi91dGlscy9pbml0aWFsLWNhcmRzLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICBjYXJkU2VsZWN0b3IsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgYnV0dG9uQWRkQ2FyZCxcclxuICBwcm9maWxlRGVzYyxcclxuICBwcm9maWxlTmFtZSxcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIHByb2ZpbGVGb3JtLFxyXG4gIGlucHV0TmFtZSxcclxuICBpbnB1dERlc2NyaXB0aW9uLFxyXG4gIHBvcHVwQWRkUGxhY2UsXHJcbiAgZ3JpZExpc3QsXHJcbiAgcG9wdXBJbWFnZSxcclxuICBwb3B1cFByb2ZpbGUsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy9Qcm9maWxlIEluZm9cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogcHJvZmlsZU5hbWUsXHJcbiAgYWJvdXRTZWxlY3RvcjogcHJvZmlsZURlc2MsXHJcbn0pO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHtcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChpbmZvKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogaW5mby5uYW1lLCBhYm91dDogaW5mby5hYm91dCB9KTtcclxuICAgICAgcHJvZmlsZVBvcHVwRm9ybS5jbG9zZSgpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHBvcHVwUHJvZmlsZVxyXG4pO1xyXG5cclxucHJvZmlsZVBvcHVwRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBwcm9maWxlSW5wdXRzID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBpbnB1dE5hbWUudmFsdWUgPSBwcm9maWxlSW5wdXRzLm5hbWU7XHJcbiAgaW5wdXREZXNjcmlwdGlvbi52YWx1ZSA9IHByb2ZpbGVJbnB1dHMuYWJvdXQ7XHJcbiAgcHJvZmlsZVBvcHVwRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy9DcmVhdGluZyBuZXcgQ2FyZFxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2UpO1xyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGF0YTogaXRlbSxcclxuICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICBpbWFnZVBvcHVwLm9wZW4oaXRlbSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2FyZFNlbGVjdG9yXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgZ3JpZExpc3RcclxuKTtcclxuXHJcbmNvbnN0IG5ld1BsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgbmV3Q2FyZHMgPSBbeyBuYW1lOiBpdGVtLnRpdGxlLCBsaW5rOiBpdGVtLmltYWdlVXJsIH1dO1xyXG4gICAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhuZXdDYXJkcyk7XHJcbiAgICAgIG5ld1BsYWNlLmNsb3NlKCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgcG9wdXBBZGRQbGFjZVxyXG4pO1xyXG5cclxubmV3UGxhY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmJ1dHRvbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdQbGFjZS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY2FyZExpc3QucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcclxuXHJcbi8vIEZPUk0gVkFMSURBVElPTlxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcHJvZmlsZUZvcm0pO1xyXG5jb25zdCBwbGFjZUZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBsYWNlSW5mbyk7XHJcblxyXG5wcm9maWxlRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucGxhY2VGb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5pdGlhbENhcmRzO1xyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRpb25Db25maWciLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfYnV0dG9uIiwicXVlcnlTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dCIsImVycm9yIiwiZG9jdW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRzIiwic29tZSIsImRpc2FibGVkIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsIl9jYXJkIiwidG9nZ2xlIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJfdHJhc2hCdXR0b24iLCJfZGVsZXRlQ2FyZCIsIl9saWtlQ2FyZCIsIl9nZXRUZW1wbGF0ZSIsImNhcmRJbWFnZSIsInNyYyIsImFsdCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lckVsZW1lbnQiLCJpdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtRWxlbWVudCIsIl9oYW5kbGVGb3JtU3VibWl0IiwicmVzZXQiLCJfaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2UiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJfYWJvdXQiLCJhYm91dCIsInByb2ZpbGVGb3JtIiwicHJvZmlsZUVkaXRCdG4iLCJpbnB1dE5hbWUiLCJpbnB1dERlc2NyaXB0aW9uIiwiYnV0dG9uQWRkQ2FyZCIsInVzZXJJbmZvIiwicHJvZmlsZVBvcHVwRm9ybSIsImluZm8iLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwicHJvZmlsZUlucHV0cyIsImdldFVzZXJJbmZvIiwib3BlbiIsImltYWdlUG9wdXAiLCJjYXJkTGlzdCIsImNhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbSIsIm5ld1BsYWNlIiwibmV3Q2FyZHMiLCJ0aXRsZSIsImltYWdlVXJsIiwicmVuZGVySXRlbXMiLCJwcm9maWxlRm9ybVZhbGlkYXRlIiwicGxhY2VGb3JtVmFsaWRhdGUiLCJwbGFjZUluZm8iLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==